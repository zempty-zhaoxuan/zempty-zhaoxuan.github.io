<div class="wrapper-sidebar">
  <div class="sidebar">
    <!-- å“ç‰ŒåŒºåŸŸ -->
    <div class="site-branding">
      <h1 class="site-name">
        <a href="{{ site.baseurl }}/">{{ site.name }}</a>
      </h1>
      <p class="site-description">{{ site.description }}</p>
    </div>

    <!-- ç°ä»£åŒ–å¯¼èˆª -->
    <div class="modern-nav">
      {% for nav in site.navigation %} {% assign is_external = false %} {% if
      nav.url contains 'http://' or nav.url contains 'https://' %} {% assign
      is_external = true %} {% endif %} {% assign item_url = nav.url %} {%
      unless is_external %} {% assign item_url = nav.url | relative_url %} {%
      endunless %} 
      
      {% assign is_active = false %} 
      
      {% comment %} Check for exact URL match {% endcomment %}
      {% if page.url == item_url %}
        {% assign is_active = true %} 
      {% endif %} 
      
      {% comment %} Check for home page {% endcomment %}
      {% if item_url == "/" and page.url == "/index.html" %} 
        {% assign is_active = true %} 
      {% endif %}
      
      {% comment %} Check for tags page {% endcomment %}
      {% if nav.name == "æ ‡ç­¾" and page.url contains "/tags" %}
        {% assign is_active = true %}
      {% endif %}
      
      {% comment %} Check for archive page {% endcomment %}
      {% if nav.name == "å½’æ¡£" and page.url contains "/archive" %}
        {% assign is_active = true %}
      {% endif %}

      <a
        href="{{ item_url }}"
        class="nav-item {% if is_active %}active{% endif %}"
      >
        <span class="nav-icon">
          {% if nav.name == "é¦–é¡µ" %}ğŸ  {% elsif nav.name == "æ ‡ç­¾" %}ğŸ·ï¸ {%
          elsif nav.name == "å½’æ¡£" %}ğŸ“š {% elsif nav.name == "å…³äº" %}ğŸ‘¤ {% else
          %}ğŸ“„ {% endif %}
        </span>
        {{ nav.name }}
      </a>
      {% endfor %}
    </div>

    <!-- æœç´¢åŠŸèƒ½ -->
    <div class="sidebar-search">
      <h3>ğŸ” æœç´¢</h3>
      <div class="search-container">
        <span class="search-icon">ğŸ”</span>
        <input
          type="text"
          id="sidebar-search-input"
          placeholder="æœç´¢æ–‡ç« ã€æ ‡ç­¾..."
          autocomplete="off"
        />
      </div>
      <div id="sidebar-search-results" class="search-results"></div>
    </div>

    <!-- åšå®¢ç»Ÿè®¡ -->
    <div class="blog-stats">
      <div class="stat-item">
        <span class="stat-number">{{ site.posts.size }}</span>
        <span class="stat-label">æ–‡ç« </span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ site.tags.size }}</span>
        <span class="stat-label">æ ‡ç­¾</span>
      </div>
      <div class="stat-item">
        {% assign total_words = 0 %} {% for post in site.posts %} {% assign
        words = post.content | number_of_words %} {% assign total_words =
        total_words | plus: words %} {% endfor %} {% assign avg_words =
        total_words | divided_by: site.posts.size %}
        <span class="stat-number">{{ avg_words }}k</span>
        <span class="stat-label">å­—æ•°</span>
      </div>
    </div>

    <!-- çƒ­é—¨æ ‡ç­¾äº‘ -->
    <div class="popular-tags">
      <h3>ğŸ·ï¸ çƒ­é—¨æ ‡ç­¾</h3>
      <div class="tag-cloud">
        {% assign sorted_tags = site.tags | sort %} {% for tag in sorted_tags
        limit:12 %}
        <a href="/tags#{{ tag[0] }}" class="tag-item">
          <span class="tag-name">{{ tag[0] }}</span>
          <span class="tag-count">{{ tag[1].size }}</span>
        </a>
        {% endfor %}
      </div>
    </div>

    <!-- æœ€æ–°æ–‡ç«  -->
    <div class="recent-posts">
      <h3>ğŸ“„ æœ€æ–°æ–‡ç« </h3>
      {% for post in site.posts limit:5 %}
      <div class="recent-post-item">
        <a href="{{ post.url }}">
          <div class="post-title">{{ post.title | truncate: 32 }}</div>
          <div class="post-date">{{ post.date | date: "%m-%d" }}</div>
        </a>
      </div>
      {% endfor %}
    </div>

    <!-- ç°ä»£åŒ–å½’æ¡£æ—¶é—´çº¿ -->
    <div class="archive-timeline">
      <h3>ğŸ“… æ–‡ç« å½’æ¡£</h3>
      {% assign post_months = site.posts | group_by_exp: "post", "post.date |
      date: '%Y-%m'" %} {% assign sorted_months_array = post_months | reverse %}
      {% for month in sorted_months_array limit:8 %} {% assign month_date =
      month.name | split: "-" %} {% assign year = month_date[0] %} {% assign
      month_num = month_date[1] %} {% case month_num %} {% when '01' %}{% assign
      month_name = "ä¸€æœˆ" %} {% when '02' %}{% assign month_name = "äºŒæœˆ" %} {%
      when '03' %}{% assign month_name = "ä¸‰æœˆ" %} {% when '04' %}{% assign
      month_name = "å››æœˆ" %} {% when '05' %}{% assign month_name = "äº”æœˆ" %} {%
      when '06' %}{% assign month_name = "å…­æœˆ" %} {% when '07' %}{% assign
      month_name = "ä¸ƒæœˆ" %} {% when '08' %}{% assign month_name = "å…«æœˆ" %} {%
      when '09' %}{% assign month_name = "ä¹æœˆ" %} {% when '10' %}{% assign
      month_name = "åæœˆ" %} {% when '11' %}{% assign month_name = "åä¸€æœˆ" %}
      {% when '12' %}{% assign month_name = "åäºŒæœˆ" %} {% endcase %}
      <a
        href="{{ site.baseurl }}/archive/#{{ month.name }}"
        class="timeline-item"
      >
        <span class="archive-date">{{ month_name }} {{ year }}</span>
        <span class="post-count">{{ month.items.size }}</span>
      </a>
      {% endfor %}
    </div>
  </div>

  <!-- æ¡Œé¢ç«¯åº•éƒ¨å›ºå®šåŒºåŸŸ -->
  <div class="wrapper-footer-desktop">
    <footer class="footer">{% include footer.html %}</footer>
  </div>
</div>
