// Theme Transition System - 主题过渡系统
.theme-transition,
.theme-transition *,
.theme-transition *:before,
.theme-transition *:after {
  transition: background-color 0.3s cubic-bezier(0.25, 0.8, 0.25, 1),
              color 0.3s cubic-bezier(0.25, 0.8, 0.25, 1),
              border-color 0.3s cubic-bezier(0.25, 0.8, 0.25, 1),
              box-shadow 0.3s cubic-bezier(0.25, 0.8, 0.25, 1),
              fill 0.3s cubic-bezier(0.25, 0.8, 0.25, 1),
              stroke 0.3s cubic-bezier(0.25, 0.8, 0.25, 1) !important;
  transition-delay: 0s !important;
}

// FOUC Prevention - 防止无样式内容闪烁
html:not(.light-theme):not(.dark-theme) {
  visibility: hidden;
}

html.light-theme,
html.dark-theme {
  visibility: visible;
}

// 默认浅色主题
:root,
.light-theme {
  --background-color: #ffffff; // Pure white for a clean look
  --background-lighten-color: #f8f9fa; // Very light gray for cards/sidebars
  --text-color: #212529; // Near-black for main text, high contrast
  --text-color-muted: #495057; // A slightly lighter gray for secondary text
  --heading-color: #212529; // Same as text color for headings
  --muted-text-color: #6c757d; // For placeholder and secondary text
  --link-color: #0056b3; // A strong, standard blue for links
  --link-color-rgb: 0, 86, 179;
  --link-lighten-color: #007bff; // A brighter blue for hover states
  --link-bghv-color: rgba(0, 123, 255, 0.1);
  --divider-color: #dee2e6; // A clear but not distracting divider color
  --divider-color-light: #e9ecef;
  --blockquote-color: #495057; // Readable text for blockquotes
  --blockquote-border-color: #ced4da;
  --table-border-color: #dee2e6;
  --table-background-color: #f8f9fa;
  --footer-border-color: #dee2e6;
  --footer-background-color: #ffffff;
  --selection-background-color: #007bff; // Standard blue selection
  --tag-index-label-background-color: #e9ecef;
  --tag-index-count-background-color: #dee2e6;
  --accent-color: #20c997; // Your existing accent color
  --accent-color-rgb: 32, 201, 151;
  
  // Modern Card Variables - 现代卡片变量
  --card-background: #ffffff;
  --card-background-hover: #ffffff;
  --card-border: rgba(0, 0, 0, 0.06);
  --card-shadow: 0 4px 15px rgba(0, 0, 0, 0.07);
  --card-shadow-hover: 0 8px 30px rgba(0, 0, 0, 0.12);
  
  // Search Variables - 搜索相关变量
  --search-background: #ffffff;
  --search-border: #ced4da;
  --search-focus-border: #0056b3;
  --search-placeholder: #6c757d;
  --search-result-hover: #e9ecef;
  
  // Button Variables - 按钮变量
  --button-primary-bg: #{$primary-600};
  --button-primary-hover: #{$primary-700};
  --button-secondary-bg: #e9ecef;
  --button-secondary-hover: #dee2e6;
  
  // Status Colors - 状态颜色
  --success-color: #{$success-500};
  --warning-color: #{$warning-500};
  --error-color: #{$error-500};
  
  // Typography Variables - 字体变量
  --font-family-base: #{$base-font};
  --font-family-code: #{$code-font};
  --font-weight-light: 300;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --font-weight-extrabold: 800;
  
  // Line Heights - 行高
  --line-height-tight: 1.25;
  --line-height-snug: 1.375;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.625;
  --line-height-loose: 2;
  
  // Letter Spacing - 字母间距
  --letter-spacing-tighter: -0.05em;
  --letter-spacing-tight: -0.025em;
  --letter-spacing-normal: 0em;
  --letter-spacing-wide: 0.025em;
  --letter-spacing-wider: 0.05em;
  --letter-spacing-widest: 0.1em;
}

// 深色主题
.dark-theme {
  --background-color: #212529; // 深灰色背景
  --background-lighten-color: #2c3136; // Slightly lighter than background
  --text-color: #e9ecef; // 浅灰色文本
  --text-color-muted: #adb5bd; // Muted text for dark theme
  --heading-color: #f8f9fa; // Slightly brighter for headings in dark theme
  --muted-text-color: #868e96; // For placeholder and secondary text
  --link-color: #4dabf7; // A brighter blue for better visibility
  --link-color-rgb: 77, 171, 247;
  --link-lighten-color: #74c0fc; // Even lighter for hover
  --link-bghv-color: rgba(77, 171, 247, 0.15);
  --divider-color: #495057; // 深色模式分隔线
  --divider-color-light: #373b41;
  --blockquote-color: #adb5bd; // 引用文本颜色
  --blockquote-border-color: #495057; // 引用边框颜色
  --table-border-color: #495057;
  --table-background-color: #343a40;
  --footer-border-color: #495057;
  --footer-background-color: #212529;
  --selection-background-color: #{$oc-blue-3}; // 亮蓝色背景，与深色文字形成良好对比
  --tag-index-label-background-color: #343a40;
  --tag-index-count-background-color: #495057;
  --accent-color: #{$accent-color}; // 引入强调色变量
  --accent-color-rgb: 32, 201, 151;
  
  // Modern Card Variables - 深色主题卡片变量
  --card-background: #282c30;
  --card-background-hover: #2c3136;
  --card-border: rgba(255, 255, 255, 0.1);
  --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  --card-shadow-hover: 0 8px 35px rgba(0, 0, 0, 0.45);
  
  // Search Variables - 深色主题搜索变量
  --search-background: #2c3136;
  --search-border: #495057;
  --search-focus-border: #4dabf7;
  --search-placeholder: #868e96;
  --search-result-hover: #343a40;
  
  // Button Variables - 深色主题按钮变量
  --button-primary-bg: #{$primary-500};
  --button-primary-hover: #{$primary-600};
  --button-secondary-bg: #343a40;
  --button-secondary-hover: #495057;
  
  // Status Colors - 深色主题状态颜色
  --success-color: #{$success-500};
  --warning-color: #{$warning-500};
  --error-color: #{$error-500};
  
  // Dark Theme Typography Adjustments - 深色主题字体调整
  --font-weight-light: 350;
  --font-weight-normal: 420;
  --font-weight-medium: 520;
  --font-weight-semibold: 620;
  --font-weight-bold: 720;
  --font-weight-extrabold: 820;
}

// Theme-Aware Component System - 主题感知组件系统
@mixin theme-aware($light-styles, $dark-styles) {
  :root &,
  .light-theme & {
    @content($light-styles);
  }
  
  .dark-theme & {
    @content($dark-styles);
  }
}

// Enhanced Theme Variables for Components - 组件增强主题变量
:root,
.light-theme {
  // Enhanced color palette
  --color-primary-50: #{$primary-50};
  --color-primary-500: #{$primary-500};
  --color-primary-600: #{$primary-600};
  --color-primary-700: #{$primary-700};
  
  // Component-specific variables
  --navbar-background: rgba(255, 255, 255, 0.95);
  --navbar-backdrop: blur(10px);
  --modal-background: rgba(255, 255, 255, 0.98);
  --modal-backdrop: rgba(0, 0, 0, 0.5);
  --tooltip-background: rgba(0, 0, 0, 0.9);
  --tooltip-text: #ffffff;
  
  // Interactive states
  --hover-overlay: rgba(0, 0, 0, 0.05);
  --active-overlay: rgba(0, 0, 0, 0.1);
  --focus-ring: #{$primary-500};
  --focus-ring-offset: #ffffff;
}

.dark-theme {
  // Enhanced dark theme color palette
  --color-primary-50: #{$primary-100};
  --color-primary-500: #{$primary-500};
  --color-primary-600: #{$primary-600};
  --color-primary-700: #{$primary-700};
  
  // Dark theme component variables
  --navbar-background: rgba(33, 37, 41, 0.95);
  --navbar-backdrop: blur(10px);
  --modal-background: rgba(33, 37, 41, 0.98);
  --modal-backdrop: rgba(0, 0, 0, 0.7);
  --tooltip-background: rgba(255, 255, 255, 0.9);
  --tooltip-text: #1a1a1a;
  
  // Dark theme interactive states
  --hover-overlay: rgba(255, 255, 255, 0.1);
  --active-overlay: rgba(255, 255, 255, 0.15);
  --focus-ring: #{$primary-500};
  --focus-ring-offset: #212529;
}

// System Preference Respect - 系统偏好尊重
@media (prefers-reduced-motion: reduce) {
  .theme-transition,
  .theme-transition *,
  .theme-transition *:before,
  .theme-transition *:after {
    transition: none !important;
    animation: none !important;
  }
}

@media (prefers-contrast: high) {
  :root,
  .light-theme {
    --text-color: #000000;
    --background-color: #ffffff;
    --link-color: #0000ee;
    --divider-color: #000000;
  }
  
  .dark-theme {
    --text-color: #ffffff;
    --background-color: #000000;
    --link-color: #66b3ff;
    --divider-color: #ffffff;
  }
}

// Print styles - 打印样式
@media print {
  * {
    background: transparent !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
} 